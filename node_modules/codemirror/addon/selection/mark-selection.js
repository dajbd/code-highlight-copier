!function(e){"object"==typeof exports&&"object"==typeof module?e(require("node_modules/codemirror/lib/codemirror.js")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)}(function(e){"use strict";function t(e){e.operation(function(){l(e)})}function o(e){e.state.markedSelection.length&&e.operation(function(){r(e)})}function n(e,t,o,n){if(0!=a(t,o))for(var r=e.state.markedSelection,i=e.state.markedSelectionStyle,l=t.line;;){var s=l==t.line?t:c(l,0),d=l+f,u=d>=o.line,m=u?o:c(d,0),S=e.markText(s,m,{className:i});if(null==n?r.push(S):r.splice(n++,0,S),u)break;l=d}}function r(e){for(var t=e.state.markedSelection,o=0;o<t.length;++o)t[o].clear();t.length=0}function i(e){r(e);for(var t=e.listSelections(),o=0;o<t.length;o++)n(e,t[o].from(),t[o].to())}function l(e){if(!e.somethingSelected())return r(e);if(e.listSelections().length>1)return i(e);var t=e.getCursor("start"),o=e.getCursor("end"),l=e.state.markedSelection;if(!l.length)return n(e,t,o);var c=l[0].find(),s=l[l.length-1].find();if(!c||!s||o.line-t.line<f||a(t,s.to)>=0||a(o,c.from)<=0)return i(e);for(;a(t,c.from)>0;)l.shift().clear(),c=l[0].find();for(a(t,c.from)<0&&(c.to.line-t.line<f?(l.shift().clear(),n(e,t,c.to,0)):n(e,t,c.from,0));a(o,s.to)<0;)l.pop().clear(),s=l[l.length-1].find();a(o,s.to)>0&&(o.line-s.from.line<f?(l.pop().clear(),n(e,s.from,o)):n(e,s.to,o))}e.defineOption("styleSelectedText",!1,function(n,l,f){var c=f&&f!=e.Init;l&&!c?(n.state.markedSelection=[],n.state.markedSelectionStyle="string"==typeof l?l:"CodeMirror-selectedtext",i(n),n.on("cursorActivity",t),n.on("change",o)):!l&&c&&(n.off("cursorActivity",t),n.off("change",o),r(n),n.state.markedSelection=n.state.markedSelectionStyle=null)});var f=8,c=e.Pos,a=e.cmpPos});