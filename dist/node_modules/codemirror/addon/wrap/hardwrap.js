!function(r){"object"==typeof exports&&"object"==typeof module?r(require("node_modules/codemirror/lib/codemirror.js")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],r):r(CodeMirror)}(function(r){"use strict";function t(r,t,e){for(var o=e.paragraphStart||r.getHelper(t,"paragraphStart"),n=t.line,a=r.firstLine();n>a;--n){var i=r.getLine(n);if(o&&o.test(i))break;if(!/\S/.test(i)){++n;break}}for(var f=e.paragraphEnd||r.getHelper(t,"paragraphEnd"),l=t.line+1,s=r.lastLine();s>=l;++l){var i=r.getLine(l);if(f&&f.test(i)){++l;break}if(!/\S/.test(i))break}return{from:n,to:l}}function e(r,t,e,o){for(var n=t;n>0&&!e.test(r.slice(n-1,n+1));--n);for(var a=!0;;a=!1){var i=n;if(o)for(;" "==r.charAt(i-1);)--i;if(0!=i||!a)return{from:i,to:n};n=t}}function o(t,o,a,i){o=t.clipPos(o),a=t.clipPos(a);var f=i.column||80,l=i.wrapOn||/\s\S|-[^\.\d]/,s=i.killTrailingSpace!==!1,c=[],h="",g=o.line,p=t.getRange(o,a,!1);if(!p.length)return null;for(var m=p[0].match(/^[ \t]*/)[0],u=0;u<p.length;++u){var v=p[u],d=h.length,b=0;h&&v&&!l.test(h.charAt(h.length-1)+v.charAt(0))&&(h+=" ",b=1);var x="";if(u&&(x=v.match(/^\s*/)[0],v=v.slice(x.length)),h+=v,u){var S=h.length>f&&m==x&&e(h,f,l,s);S&&S.from==d&&S.to==d+b?(h=m+v,++g):c.push({text:[b?" ":""],from:n(g,d),to:n(g+1,x.length)})}for(;h.length>f;){var E=e(h,f,l,s);c.push({text:["",m],from:n(g,E.from),to:n(g,E.to)}),h=m+h.slice(E.to),++g}}return c.length&&t.operation(function(){for(var e=0;e<c.length;++e){var o=c[e];(o.text||r.cmpPos(o.from,o.to))&&t.replaceRange(o.text,o.from,o.to)}}),c.length?{from:c[0].from,to:r.changeEnd(c[c.length-1])}:null}var n=r.Pos;r.defineExtension("wrapParagraph",function(r,e){e=e||{},r||(r=this.getCursor());var a=t(this,r,e);return o(this,n(a.from,0),n(a.to-1),e)}),r.commands.wrapLines=function(r){r.operation(function(){for(var e=r.listSelections(),a=r.lastLine()+1,i=e.length-1;i>=0;i--){var f,l=e[i];if(l.empty()){var s=t(r,l.head,{});f={from:n(s.from,0),to:n(s.to-1)}}else f={from:l.from(),to:l.to()};f.to.line>=a||(a=f.from.line,o(r,f.from,f.to,{}))}})},r.defineExtension("wrapRange",function(r,t,e){return o(this,r,t,e||{})}),r.defineExtension("wrapParagraphsInRange",function(r,e,a){a=a||{};for(var i=this,f=[],l=r.line;l<=e.line;){var s=t(i,n(l,0),a);f.push(s),l=s.to}var c=!1;return f.length&&i.operation(function(){for(var r=f.length-1;r>=0;--r)c=c||o(i,n(f[r].from,0),n(f[r].to-1),a)}),c})});